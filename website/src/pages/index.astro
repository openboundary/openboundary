---
import HomeLayout from '../layouts/HomeLayout.astro';
import Terminal from '../components/Terminal.astro';
import TerminalLine from '../components/TerminalLine.astro';
import ValueGrid from '../components/ValueGrid.astro';
import StandardsGrid from '../components/StandardsGrid.astro';
import CodeComparison from '../components/CodeComparison.astro';
import ComponentsGrid from '../components/ComponentsGrid.astro';
import StableBoundary from '../components/StableBoundary.astro';

const version = 'v0.1.0';
const github = 'https://github.com/openboundary/openboundary';
---

<HomeLayout title="OpenBoundary - Specification-driven backend code generation">
  <section class="hero">
    <div class="hero-label">
      <span class="hero-label-dot"></span>
      {version}
    </div>

    <h1>Architectural guardrails for AI-assisted&nbsp;development</h1>

    <p class="hero-sub">
      Auth, rate limiting, validation, middleware order — these are
      architectural invariants. They shouldn't depend on whether your AI tool
      remembered to include them. Define them once in YAML, compile to
      type-safe TypeScript.
    </p>

    <p class="hero-tagline">
      Specification-driven code generation with enforced constraints.
    </p>

    <p class="hero-tagline-sub">
      Open spec. Open compiler. AGPL-3.0&nbsp;licensed.
    </p>

    <div class="hero-actions">
      <a href="/docs/" class="btn btn-primary">
        Read the Docs
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7" />
        </svg>
      </a>
      <a href={github} class="btn btn-secondary">View Source</a>
    </div>

    <Terminal>
      <TerminalLine type="command">openboundary compile spec.yaml</TerminalLine>
      <TerminalLine type="success">✓ Validated security boundaries</TerminalLine>
      <TerminalLine type="success">✓ Enforced middleware invariants</TerminalLine>
      <TerminalLine type="success">✓ Generated TypeScript project</TerminalLine>
      <TerminalLine type="muted">→ src/server.ts</TerminalLine>
      <TerminalLine type="muted">→ src/middleware/authn.ts</TerminalLine>
      <TerminalLine type="muted">→ src/handlers/users.ts</TerminalLine>
    </Terminal>
  </section>

  <section class="section what-is">
    <div class="section-header">
      <div class="section-label">What is OpenBoundary?</div>
      <h2 class="section-title">A specification format and compiler for backend&nbsp;architecture</h2>
    </div>
    <div class="what-is-content">
      <p>
        OpenBoundary is an open-source specification format and compiler for
        defining security and architectural boundaries in software systems.
        You declare the rules in YAML. The compiler generates
        production-ready TypeScript — route guards, middleware,
        authorization logic, input validation — with zero ambiguity.
      </p>
      <p>
        It exists because AI coding tools are fast but structurally unaware.
        They'll generate an unauthenticated endpoint, skip rate limiting, or
        flatten an authorization model into a boolean. Not out of malice —
        they just don't have the architectural context. OpenBoundary gives
        them that context as a compilable, enforceable contract.
      </p>
    </div>
  </section>

  <section class="section">
    <div class="section-header">
      <div class="section-label">Why this exists</div>
      <h2 class="section-title">The problem with AI-assisted development</h2>
      <p class="section-desc">
        AI coding tools generate business logic quickly. They don't have
        context about your auth requirements, middleware order, or which
        endpoints need rate limiting. That context lives in your head or
        scattered across docs. OpenBoundary makes it explicit and
        enforceable.
      </p>
    </div>

    <ValueGrid />

    <div class="standards-section">
      <div class="section-label">Built on Open Standards</div>
      <h3 class="section-title" style="font-size: 24px; margin-bottom: 8px;">
        No lock-in. Real ecosystem tools.
      </h3>
      <p class="section-desc">
        OpenBoundary orchestrates existing standards. Your specs reference
        files in their native formats.
      </p>

      <StandardsGrid />
    </div>
  </section>

  <section class="section">
    <div class="section-header">
      <div class="section-label">How it works</div>
      <h2 class="section-title">YAML in, TypeScript out</h2>
      <p class="section-desc">
        Define your boundaries in a spec file. Run the compiler. Get typed,
        production-ready code.
      </p>
    </div>

    <CodeComparison />
  </section>

  <section class="section" id="components">
    <div class="section-header">
      <div class="section-label">Spec components</div>
      <h2 class="section-title">What you can define</h2>
      <p class="section-desc">
        The spec supports HTTP servers, databases, middleware chains, and
        use cases. Each component type has its own validation rules.
      </p>
    </div>

    <ComponentsGrid />
  </section>

  <StableBoundary />

  <section class="cta">
    <h2>Get started</h2>
    <p>Clone the repo and try the example spec.</p>
    <div class="cta-code">
      <span class="cmd">$</span> git clone {github}.git
    </div>
    <div class="cta-actions">
      <a href="/docs/" class="btn btn-primary">
        Documentation
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7" />
        </svg>
      </a>
      <a href={github} class="btn btn-secondary">GitHub</a>
    </div>
  </section>
</HomeLayout>

<style>
  .hero {
    max-width: 1200px;
    margin: 0 auto;
    padding: 160px 24px 100px;
  }

  .hero-label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--ob-text-secondary);
    margin-bottom: 24px;
  }

  .hero-label-dot {
    width: 6px;
    height: 6px;
    background: var(--ob-green);
    border-radius: 50%;
  }

  .hero h1 {
    font-size: clamp(32px, 5vw, 48px);
    font-weight: 600;
    letter-spacing: -0.03em;
    line-height: 1.35;
    margin-bottom: 24px;
    max-width: 860px;
  }

  .hero-sub {
    font-size: 17px;
    color: var(--ob-text-secondary);
    max-width: 640px;
    line-height: 1.7;
    margin-bottom: 20px;
  }

  .hero-tagline {
    font-size: 17px;
    color: var(--ob-text);
    font-weight: 500;
    margin-bottom: 12px;
  }

  .hero-tagline-sub {
    font-family: var(--ob-font-mono);
    font-size: 13px;
    color: var(--ob-text-tertiary);
    letter-spacing: 0.01em;
    margin-bottom: 40px;
  }

  .hero-actions {
    display: flex;
    gap: 12px;
    margin-bottom: 80px;
  }

  .hero-actions .btn {
    padding: 10px 18px;
    font-size: 14px;
  }

  .section {
    max-width: 1200px;
    margin: 0 auto;
    padding: 100px 24px;
  }

  .section-header {
    margin-bottom: 48px;
  }

  .section-label {
    font-family: var(--ob-font-mono);
    font-size: 12px;
    color: var(--ob-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 12px;
  }

  .section-title {
    font-size: 32px;
    font-weight: 600;
    letter-spacing: -0.03em;
    margin-bottom: 12px;
  }

  .section-desc {
    font-size: 16px;
    color: var(--ob-text-secondary);
    max-width: 560px;
    line-height: 1.7;
  }

  .what-is {
    border-top: 1px solid var(--ob-border);
  }

  .what-is-content {
    max-width: 720px;
  }

  .what-is-content p {
    font-size: 16px;
    color: var(--ob-text-secondary);
    line-height: 1.8;
    margin-bottom: 20px;
  }

  .what-is-content p:last-child {
    margin-bottom: 0;
  }

  .standards-section {
    border-top: 1px solid var(--ob-border);
    padding-top: 80px;
  }

  .cta {
    text-align: center;
    padding: 100px 24px;
    border-top: 1px solid var(--ob-border);
  }

  .cta h2 {
    font-size: 28px;
    font-weight: 600;
    letter-spacing: -0.02em;
    margin-bottom: 16px;
  }

  .cta p {
    color: var(--ob-text-secondary);
    margin-bottom: 32px;
  }

  .cta-code {
    display: inline-block;
    font-family: var(--ob-font-mono);
    font-size: 13px;
    color: var(--ob-text-secondary);
    background: var(--ob-bg-subtle);
    border: 1px solid var(--ob-border);
    padding: 12px 20px;
    border-radius: 6px;
    margin-bottom: 32px;
  }

  .cta-code .cmd {
    color: var(--ob-text-tertiary);
  }

  .cta-actions {
    display: flex;
    justify-content: center;
    gap: 12px;
  }

  @media (max-width: 900px) {
    .hero {
      padding: 120px 20px 80px;
    }

    .section {
      padding: 80px 20px;
    }

    .section-title {
      font-size: 28px;
    }

    .cta {
      padding: 80px 20px;
    }

    .cta-actions {
      flex-direction: column;
      align-items: center;
    }

    .cta-actions .btn {
      width: 100%;
      max-width: 280px;
      justify-content: center;
    }
  }

  @media (max-width: 768px) {
    .hero-actions {
      flex-direction: column;
    }

    .hero-actions .btn {
      justify-content: center;
    }
  }

  @media (max-width: 640px) {
    .hero h1 {
      font-size: 28px;
    }

    .hero-sub {
      font-size: 16px;
    }

    .cta h2 {
      font-size: 24px;
    }

    .cta-code {
      font-size: 11px;
      padding: 10px 14px;
      word-break: break-all;
      max-width: 100%;
    }
  }
</style>
