{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "OpenBoundary plugin boundary definitions - SINGLE SOURCE OF TRUTH",
  "version": "1.0.0",

  "safeZones": {
    "always": {
      "description": "Files that can always be freely edited",
      "patterns": [
        "spec.yaml",
        "openboundary.yaml",
        "openapi.yaml",
        "openapi.yml",
        "src/auth/**/*.ts",
        "src/auth/**/*.conf",
        "src/auth/**/*.csv",
        "src/db/schema.ts",
        "src/db/seed.ts",
        ".env.example"
      ]
    },
    "partial": {
      "description": "Files where only specific sections can be edited",
      "patterns": [
        "src/components/usecases/*.ts"
      ],
      "excludePatterns": [
        "src/components/usecases/index.ts",
        "src/components/usecases/schemas.ts",
        "src/components/usecases/types.ts"
      ],
      "editableSection": {
        "marker": "// TODO: Implement usecase",
        "scope": "function-body-only",
        "description": "Only the code between function signature { and closing } can be edited"
      }
    }
  },

  "forbidden": {
    "description": "Files that must NEVER be edited",
    "patterns": [
      "src/components/servers/**/*.ts",
      "src/components/usecases/index.ts",
      "src/components/usecases/schemas.ts",
      "src/components/usecases/types.ts",
      "src/middleware/**/*.ts",
      "tests/**/*.generated.ts",
      "**/*.generated.ts",
      "package.json",
      "package-lock.json",
      "tsconfig.json",
      "Dockerfile",
      ".github/**/*"
    ],
    "markerPattern": "// Generated by OpenBoundary - DO NOT EDIT"
  },

  "sensitive": {
    "description": "Files that require extra caution - warn but allow",
    "patterns": [
      ".env",
      ".env.local",
      ".env.production",
      "src/auth/*.csv"
    ],
    "warning": "This file contains sensitive configuration. Ensure changes don't introduce security vulnerabilities."
  },

  "specValidation": {
    "description": "Rules for validating spec.yaml changes",
    "forbiddenMutations": [
      {
        "rule": "middleware-removal",
        "description": "Cannot remove middleware from usecases without explicit justification",
        "pattern": "middleware:\\s*\\[\\s*\\]",
        "exception": "Only allowed if usecase is explicitly marked as public"
      },
      {
        "rule": "auth-bypass",
        "description": "Cannot set authentication to false on protected resources",
        "pattern": "authentication:\\s*false"
      }
    ]
  },

  "enforcement": {
    "gitDiffCheck": true,
    "failOnViolation": true,
    "createBackupBranch": false,
    "logViolations": true
  }
}
