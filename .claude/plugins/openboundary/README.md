# OpenBoundary Plugin

A Claude Code plugin that constrains AI agents to work safely within OpenBoundary specification boundaries.

## Overview

OpenBoundary compiles YAML specifications into type-safe TypeScript backends. This plugin ensures AI agents can only modify files within defined safe zones, preventing accidental corruption of generated infrastructure code.

## Installation

Add to your Claude configuration:

```json
{
  "plugins": ["openboundary"]
}
```

## What It Does

### Constrains Editing to Safe Zones

**Specification files (always safe)**:

- `spec.yaml` - main specification
- `openapi.yaml` - API contracts

**Configuration files (referenced in spec)**:

- `src/auth/*.ts` - authentication config
- `src/auth/*.conf` - Casbin model
- `src/auth/*.csv` - Casbin policy
- `src/db/schema.ts` - Drizzle schema

**Usecase implementations (body only)**:

- `src/components/usecases/*.ts` - implementation functions
- Only the function body (between signature and closing brace)
- Files contain `// TODO: Implement usecase` markers

### Prevents Dangerous Edits

**Never allows editing**:

- Files marked `// Generated by OpenBoundary - DO NOT EDIT`
- Server files, middleware registration, route setup
- Test infrastructure and scaffolding
- Index/barrel files

## Components

### Agent: boundary-enforcer

The main agent that understands OpenBoundary constraints and guides development within safe boundaries.

Usage: Ask Claude to help with OpenBoundary development - the agent activates automatically.

### Skills

| Skill | Description |
|-------|-------------|
| `/ob-compile` | Compile specification to TypeScript |
| `/ob-validate` | Validate specification without generating |
| `/ob-new-usecase` | Add a new usecase to the specification |

### Hooks

| Hook | Trigger | Purpose |
|------|---------|---------|
| pre-edit-boundary-check | Before edits | Validates file is in safe zone |
| post-compile-validate | After compile | Ensures generated code is valid |

## Workflow

1. **Define boundaries** - Edit `spec.yaml` to add components, usecases, middleware requirements
2. **Configure infrastructure** - Modify auth config, Casbin policies, database schema
3. **Compile** - Run `/ob-compile` to generate TypeScript
4. **Implement** - Write business logic in usecase function bodies
5. **Iterate** - Repeat as needed; generated code stays protected

## Detection

This plugin activates for projects containing:

- `spec.yaml` with OpenBoundary schema markers
- `version:` and `components:` fields in specification

## License

Same license as the OpenBoundary project.
